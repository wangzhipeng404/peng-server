(function(e){function t(t){for(var n,a,o=t[0],l=t[1],c=t[2],p=0,f=[];p<o.length;p++)a=o[p],s[a]&&f.push(s[a][0]),s[a]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(e[n]=l[n]);u&&u(t);while(f.length)f.shift()();return r.push.apply(r,c||[]),i()}function i(){for(var e,t=0;t<r.length;t++){for(var i=r[t],n=!0,o=1;o<i.length;o++){var l=i[o];0!==s[l]&&(n=!1)}n&&(r.splice(t--,1),e=a(a.s=i[0]))}return e}var n={},s={app:0},r=[];function a(t){if(n[t])return n[t].exports;var i=n[t]={i:t,l:!1,exports:{}};return e[t].call(i.exports,i,i.exports,a),i.l=!0,i.exports}a.m=e,a.c=n,a.d=function(e,t,i){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(a.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)a.d(i,n,function(t){return e[t]}.bind(null,n));return i},a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],l=o.push.bind(o);o.push=t,o=o.slice();for(var c=0;c<o.length;c++)t(o[c]);var u=l;r.push([0,"chunk-vendors"]),i()})({0:function(e,t,i){e.exports=i("56d7")},2856:function(e,t,i){},"2f8c":function(e,t,i){},"467a":function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("div",{staticClass:"user-info"},[i("mt-field",{staticClass:"form-textarea",attrs:{placeholder:"收货信息",type:"textarea",rows:"3"},model:{value:e.raw_info,callback:function(t){e.raw_info=t},expression:"raw_info"}}),i("div",{directives:[{name:"show",rawName:"v-show",value:e.raw_info,expression:"raw_info"}],staticClass:"splited-info"},[i("mt-field",{staticClass:"form-input",attrs:{placeholder:"姓名"},model:{value:e.splited_info.user_name,callback:function(t){e.$set(e.splited_info,"user_name",t)},expression:"splited_info.user_name"}}),i("mt-field",{staticClass:"form-input",attrs:{placeholder:"电话"},model:{value:e.splited_info.user_phone,callback:function(t){e.$set(e.splited_info,"user_phone",t)},expression:"splited_info.user_phone"}}),i("mt-field",{staticClass:"form-input",attrs:{placeholder:"省"},model:{value:e.splited_info.porvince,callback:function(t){e.$set(e.splited_info,"porvince",t)},expression:"splited_info.porvince"}}),i("mt-field",{staticClass:"form-input",attrs:{placeholder:"市"},model:{value:e.splited_info.city,callback:function(t){e.$set(e.splited_info,"city",t)},expression:"splited_info.city"}}),i("mt-field",{staticClass:"form-input",attrs:{placeholder:"区"},model:{value:e.splited_info.country,callback:function(t){e.$set(e.splited_info,"country",t)},expression:"splited_info.country"}}),i("mt-field",{staticClass:"form-input",attrs:{placeholder:"街道",type:"textarea"},model:{value:e.splited_info.street,callback:function(t){e.$set(e.splited_info,"street",t)},expression:"splited_info.street"}})],1)],1),i("div",{staticClass:"item-list"},[e._l(e.items,function(t,n){return i("div",{key:n,staticClass:"item-box"},[i("div",{staticClass:"box-title"},[e._v("\n        产品"+e._s(n+1)+"\n        "),i("div",{staticClass:"remove-btn",on:{click:function(t){e.removeItem(n)}}},[e._v("移除")])]),i("mt-field",{staticClass:"form-input",attrs:{placeholder:"产品名"},model:{value:t.name,callback:function(i){e.$set(t,"name",i)},expression:"item.name"}}),i("mt-field",{staticClass:"form-input",attrs:{placeholder:"分类"},model:{value:t.type,callback:function(i){e.$set(t,"type",i)},expression:"item.type"}}),i("mt-field",{staticClass:"form-input",attrs:{placeholder:"颜色"},model:{value:t.color,callback:function(i){e.$set(t,"color",i)},expression:"item.color"}}),i("mt-field",{staticClass:"form-input",attrs:{placeholder:"型号"},model:{value:t.size,callback:function(i){e.$set(t,"size",i)},expression:"item.size"}}),i("mt-field",{staticClass:"form-input",attrs:{placeholder:"数量",type:"number"},model:{value:t.num,callback:function(i){e.$set(t,"num",i)},expression:"item.num"}}),i("mt-field",{staticClass:"form-input",attrs:{placeholder:"售价",type:"number"},model:{value:t.price,callback:function(i){e.$set(t,"price",i)},expression:"item.price"}}),i("mt-field",{staticClass:"form-input",attrs:{placeholder:"取货价",type:"number"},model:{value:t.cost,callback:function(i){e.$set(t,"cost",i)},expression:"item.cost"}}),i("mt-field",{staticClass:"form-input",attrs:{placeholder:"货号"},model:{value:t.sku_no,callback:function(i){e.$set(t,"sku_no",i)},expression:"item.sku_no"}}),i("mt-field",{staticClass:"form-input",attrs:{placeholder:"厂家"},model:{value:t.supplier,callback:function(i){e.$set(t,"supplier",i)},expression:"item.supplier"}}),i("mt-field",{staticClass:"form-input",attrs:{placeholder:"取货地址"},model:{value:t.address,callback:function(i){e.$set(t,"address",i)},expression:"item.address"}}),i("mt-field",{staticClass:"form-input",attrs:{placeholder:"备注"},model:{value:t.remark,callback:function(i){e.$set(t,"remark",i)},expression:"item.remark"}})],1)}),i("div",{staticClass:"item-btn"},[i("mt-button",{attrs:{type:"default",size:"large",plain:""},on:{click:e.addItem}},[e._v("添加产品")])],1)],2),i("div",[i("mt-field",{staticClass:"form-textarea",attrs:{placeholder:"备注",type:"textarea"},model:{value:e.remark,callback:function(t){e.remark=t},expression:"remark"}})],1),i("mt-button",{staticClass:"submit-btn",attrs:{type:"primary",size:"large",plain:""},on:{click:e.createOrder}},[e._v("创建订单")])],1)},s=[],r=i("c93e"),a=i("c665"),o=(i("cadf"),i("551c"),i("097d"),i("aa35"),i("76a0")),l=i("18a0"),c=function e(){Object(a["a"])(this,e),this.name="",this.type="",this.size="",this.num="",this.remark="",this.price="",this.sku_no="",this.cost="",this.color="",this.supplier="",this.address="",this.images=[]},u={name:"OrderForm",components:{"mt-field":o["Field"],"mt-button":o["Button"]},data:function(){return{raw_info:"",splited_info:{user_name:"",user_phone:"",porvince:"",city:"",country:"",street:""},remark:"",items:[new c]}},computed:{},mounted:function(){},methods:{addItem:function(){this.items.push(new c)},removeItem:function(e){confirm("确认移除该产品吗？")&&this.items.splice(e,1)},createOrder:function(){if(this.splited_info.user_name&&this.splited_info.user_phone){if(confirm("确定创建订单吗？")){var e=Object(r["a"])({},this.splited_info,{raw_info:this.raw_info,items:this.items.map(function(e){return Object(r["a"])({},e,{price:100*e.price,cost:100*e.cost})}),remark:this.remark}),t=new Headers;t.append("Content-Type","application/json"),fetch("/shooop/api/order/add",{method:"POST",body:JSON.stringify(e),headers:t}).then(function(e){return e.json()}).then(function(e){l.miniProgram.getEnv(function(t){t.miniprogram&&l.miniProgram.navigateTo({url:"/pages/orderDetail/index?id=".concat(e._id)})})})}}else alert("请填写收货信息")}},watch:{raw_info:function(e){var t=/^(\D*)?(\d{11})?(.*?省)?(.*?市)?(.*?区)?(.*)?$/g.exec(e);t&&(this.splited_info={user_name:t[1],user_phone:t[2],porvince:t[3],city:t[4],country:t[5],street:t[6]})}}},p=u,f=(i("ae95"),i("2877")),d=Object(f["a"])(p,n,s,!1,null,null,null);d.options.__file="OrderForm.vue";t["default"]=d.exports},"56d7":function(e,t,i){"use strict";i.r(t);i("cadf"),i("551c"),i("097d");var n=i("2b0e"),s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{attrs:{id:"app"}},[i("div",{attrs:{id:"nav"}},[e._v("订单管理系统")]),i("router-view")],1)},r=[],a=(i("5c0b"),i("2877")),o={},l=Object(a["a"])(o,s,r,!1,null,null,null);l.options.__file="App.vue";var c=l.exports,u=i("8c4f"),p=i("467a");n["default"].use(u["a"]);var f=new u["a"]({mode:"history",base:"/",routes:[{path:"/",name:"订单编辑",component:p["default"]},{path:"/order-form",name:"订单编辑",component:function(){return Promise.resolve().then(i.bind(null,"467a"))}}]}),d=i("2f62");n["default"].use(d["a"]);var m=new d["a"].Store({state:{},mutations:{},actions:{}});i("aa35");n["default"].config.productionTip=!1,new n["default"]({router:f,store:m,render:function(e){return e(c)}}).$mount("#app")},"5c0b":function(e,t,i){"use strict";var n=i("2856"),s=i.n(n);s.a},ae95:function(e,t,i){"use strict";var n=i("2f8c"),s=i.n(n);s.a}});
//# sourceMappingURL=app.fd019a7c.js.map